options(scipen = 100)
# Period to be included in ES
START_YEAR = 1950
END_YEAR = 2020
# General parameters
ES_SPECIES_CODE = "ALB"
REPORT_YEAR     = 2022
MEETING         = "SC25"
LANGUAGE        = "E"
TITLE = paste0("IOTC-", REPORT_YEAR, "-", MEETING, "-ES01_", ES_SPECIES_CODE, "_", LANGUAGE, "_DATA")
# Source the R codes
setwd("initialization")
source("90_defaults.R")
source("91_libs_external.R")
source("92_libs_IOTC.R")
source("93_functions.R")
source("01_NC_DATA.R")
source("02_STATUS_TABLE_ALB.R)
source("02_STATUS_TABLE_ALB.R")
source("03_KOBE_COLOR_KEY_ALB.R")
source("04_NC_CHARTS.R")
setwd("..")
render("rmd/00_DOCX.Rmd",
output_format = "word_document2",
output_dir    = paste0("outputs/", ES_SPECIES_CODE, "/"),
output_file   = paste0(TITLE, ".docx")
)
render("rmd/00_DOCX.Rmd",
output_format = "word_document2",
output_dir    = paste0("outputs/", ES_SPECIES_CODE, "/"),
output_file   = paste0(TITLE, ".docx")
)
library(iotc.base.common.plots)
NC_est(species_codes = c("BLT", "FRI", "KAW", "LOT", "COM", "GUT"), years = 2020)[, .(CATCH = round(sum(CATCH))), by = .(SPECIES_CODE)]
NC_est(species_codes = c("BLT", "FRI", "KAW", "LOT", "COM", "GUT"), years %in% 2016:2020)[, .(CATCH = round(sum(CATCH)/5)), by = .(SPECIES_CODE)]
NC_est(species_codes = c("BLT", "FRI", "KAW", "LOT", "COM", "GUT"), years = 2016:2020)[, .(CATCH = round(sum(CATCH)/5)), by = .(SPECIES_CODE)]
14 +21
149 +21
library(iotc.data.common.workflow)
library(iotc.base.common.plots)
toto = NC_est()
table(toto$SPECIES_CATEGORY_CODE)
?NC_est
toto = NC_est(species_category_codes = c("NERITIC", "SEERFISH"))
NC_MYS = NC_est(fleet_codes = "MYS", species_category_codes = c("NERITIC", "SEERFISH"))
NC_MYS = NC_est(fleet_codes = "MYS", species_category_codes = c("NERITIC", "SEERFISH"), years = 2016:2020)
catch_pareto(NC_MYS, categorize_by = SPECIES_CODE, fill_by = FISHERY)
catches_by_year(NC_MYS)
NC_MYS[, .(CATCH = sum(CATCH/5)), keyby = .(SPECIES_CODE, SPECIES)]
NC_MYS[, .(CATCH = round(sum(CATCH/5))), keyby = .(SPECIES_CODE, SPECIES)][order(catch, decreasing = T)]
NC_MYS[, .(CATCH = round(sum(CATCH/5))), keyby = .(SPECIES_CODE, SPECIES)][order(CATCH, decreasing = T)]
NC_MYS[, .(CATCH = round(sum(CATCH/5))), keyby = .(FISHERY_CODE, FISHERY)][order(CATCH, decreasing = T)]
NC_THA = NC_est(fleet_codes = "THA", species_category_codes = c("NERITIC", "SEERFISH"))
NC_THA[, .(CATCH = round(sum(CATCH/5))), keyby = .(FISHERY_CODE, FISHERY)][order(CATCH, decreasing = T)]
catch_pareto(NC_THA, categorize_by = SPECIES_CODE, fill_by = FISHERY)
NC_THA = NC_est(fleet_codes = "THA", species_category_codes = c("NERITIC", "SEERFISH"), years = 2016:2020)
catch_pareto(NC_THA, categorize_by = SPECIES_CODE, fill_by = FISHERY)
catches_by_year(NC_THA)
mean(catches_by_year(NC_THA)
)
mean(catches_by_year(NC_THA$CATCH))
mean(catches_by_year(NC_THA)$CATCH)
NC_TA=HA[, .(CATCH = round(sum(CATCH/5))), keyby = .(SPECIES_CODE, SPECIES)][order(CATCH, decreasing = T)]
NC_THA[, .(CATCH = round(sum(CATCH/5))), keyby = .(SPECIES_CODE, SPECIES)][order(CATCH, decreasing = T)]
NC_THA[, .(CATCH = round(sum(CATCH/5))), keyby = .(FISHERY_CODE, FISHERY)][order(CATCH, decreasing = T)]
